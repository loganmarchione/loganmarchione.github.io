<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How to run Renovate on a self-hosted Gitea and Drone instance | Logan Marchione</title>
<meta name="keywords" content="">
<meta name="description" content="Introduction I recently started using Mend&rsquo;s Renovate bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called Dependabot, but it only works with GitHub. Renovate is much more flexible, and it&rsquo;s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.
However, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the &ldquo;magic&rdquo; for you, so it &ldquo;just works&rdquo;.">
<meta name="author" content="Logan Marchione">
<link rel="canonical" href="https://loganmarchione.github.io/2022/10/how-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.92af714ca533aa152c7e6a8f010bd7a3e443ea5c0968de40949facc94b5e6229.css" integrity="sha256-kq9xTKUzqhUsfmqPAQvXo&#43;RD6lwJaN5AlJ&#43;syUteYik=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg">
<link rel="icon" type="image/png" sizes="16x16" href="https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg">
<link rel="icon" type="image/png" sizes="32x32" href="https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg">
<link rel="apple-touch-icon" href="https://loganmarchione.github.io/assets/favicon/apple-touch-icon.png">
<link rel="mask-icon" href="https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><script async defer data-domain="loganmarchione.com" src="https://plausible.io/js/plausible.js"></script><meta property="og:title" content="How to run Renovate on a self-hosted Gitea and Drone instance" />
<meta property="og:description" content="Introduction I recently started using Mend&rsquo;s Renovate bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called Dependabot, but it only works with GitHub. Renovate is much more flexible, and it&rsquo;s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.
However, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the &ldquo;magic&rdquo; for you, so it &ldquo;just works&rdquo;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://loganmarchione.github.io/2022/10/how-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance/" />
<meta property="og:image" content="https://loganmarchione.github.io/assets/featured/featured_renovate.svg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-10-24T00:00:00+00:00" /><meta property="og:site_name" content="Logan Marchione" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://loganmarchione.github.io/assets/featured/featured_renovate.svg" />
<meta name="twitter:title" content="How to run Renovate on a self-hosted Gitea and Drone instance"/>
<meta name="twitter:description" content="Introduction I recently started using Mend&rsquo;s Renovate bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called Dependabot, but it only works with GitHub. Renovate is much more flexible, and it&rsquo;s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.
However, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the &ldquo;magic&rdquo; for you, so it &ldquo;just works&rdquo;."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://loganmarchione.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "How to run Renovate on a self-hosted Gitea and Drone instance",
      "item": "https://loganmarchione.github.io/2022/10/how-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to run Renovate on a self-hosted Gitea and Drone instance",
  "name": "How to run Renovate on a self-hosted Gitea and Drone instance",
  "description": "Introduction I recently started using Mend\u0026rsquo;s Renovate bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called Dependabot, but it only works with GitHub. Renovate is much more flexible, and it\u0026rsquo;s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.\nHowever, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the \u0026ldquo;magic\u0026rdquo; for you, so it \u0026ldquo;just works\u0026rdquo;.",
  "keywords": [
    
  ],
  "articleBody": "Introduction I recently started using Mend’s Renovate bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called Dependabot, but it only works with GitHub. Renovate is much more flexible, and it’s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.\nHowever, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the “magic” for you, so it “just works”. These are my notes on getting Renovate working with a self-hosted instance of Gitea and Drone.\nSelf-hosting Renovate As a user, there are two ways of running Renovate:\nsomeone else hosts Renovate and you install it for the repositories you choose (e.g., as a GitHub app) you extend off the global configuration provided my Renovate by adding a per-repository configuration file (called renovate.json) Renovate runs continuously in the background you host Renovate you provide some infrastructure for Renovate to run on (e.g., by running a Docker image, using a GitHub Action, running a npm package, etc…) you need to provide a global configuration file (called config.js) you add a per-repository configuration file (called renovate.json) Renovate needs to run on a schedule (e.g., on a cronjob) In my case, I’m running Gitea and Drone at home, so I’m going to self-host Renovate and run the Renovate Docker image as a Drone step.\nIt’s important to note that there are two configuration files, but it’s recommended to keep as much configuration as possible in the per-repository files so that end users have the most flexibility and transparency.\nglobal configuration (called config.js) per-repository configuration (called renovate.json) Setup GitHub steps Create a GitHub personal access token (PAT) You need a GitHub PAT for getting release notes from GitHub.com to increase the hourly API limit It can be for any account (e.g., your personal account) It needs the public_repo permission, nothing else Save this token somewhere Gitea steps Renovate user Create renovate user\nLogin as the Gitea admin user and create a user for Renovate, called renovate Create a personal access token (PAT) for the renovate user\nLogout of the admin user Login as the renovate user, go to Settings--\u003eApplications--\u003eManage Access Tokens and click on Generate Token Save this token somewhere Create repository for renovate\nCreate a new repository under the renovate user called renovate-config Create a file called config.js (this contains global settings for your instance of Renovate) Below is my config.js file (you’ll have to update the endpoint, gitAuthor, and the repositories section with the list of all Gitea repositories you want Renovate to run against) module.exports = { platform: 'gitea', endpoint: 'https://git.internal.yourdomain.com/api/v1/', gitAuthor: 'Renovate Bot ', username: 'renovate', autodiscover: true, onboardingConfig: { $schema: 'https://docs.renovatebot.com/renovate-schema.json', extends: ['config:base'] }, optimizeForDisabled: true, persistRepoData: true, repositories: [ \"logan/docker\" ] } Create a file called .drone.yml (this is the file that will run on a schedule to actually run Renovate) Below is my .drone.yml file --- kind: pipeline type: docker name: renovate trigger: event: - cron - push - custom environment: LOG_LEVEL: debug steps: - name: renovate - validate config image: renovate/renovate:33.2.0 # https://github.com/renovatebot/renovate/discussions/15049 commands: - unset GIT_COMMITTER_NAME GIT_COMMITTER_EMAIL GIT_AUTHOR_NAME GIT_AUTHOR_EMAIL - renovate-config-validator - name: renovate image: renovate/renovate:33.2.0 # https://github.com/renovatebot/renovate/discussions/15049 commands: - unset GIT_COMMITTER_NAME GIT_COMMITTER_EMAIL GIT_AUTHOR_NAME GIT_AUTHOR_EMAIL - renovate environment: RENOVATE_TOKEN: from_secret: RENOVATE_TOKEN GITHUB_COM_TOKEN: from_secret: GITHUB_COM_TOKEN Drone steps Login to Drone as the renovate user (you’ll have to authorize the application)\nGo to renovate-config--\u003eSettings--\u003eSecrets and click on New Secret\nAdd a secret called GITHUB_COM_TOKEN with the value of the GitHub PAT Add a secret called RENOVATE_TOKEN with the value of the renovate user’s Gitea PAT Go to renovate-config--\u003eSettings--\u003eCron Jobs and click on New Cron Job\nAdd an hourly cron job using @hourly This is how to specify how often to run Renovate More Gitea steps Renovate comes with a built-in Docker Compose manager, so it can automatically find any compose files using the regex below.\n(^|/)(?:docker-)?compose[^/]*\\.ya?ml$ Now we need a target repository we want to run Renovate against. This is the example repository I’m using, called logan/docker. It contains the following:\na directory for docker apps that I don’t use anymore (apps_old) a directory for docker apps that I currently use (docker_app_host) a .drone.yml file (used for linting my docker-compose.yml files) a renovate.json file . ├── apps_old │ ├── app1 │ │ └── docker-compose.yml │ ├── app2 │ │ └── docker-compose.yml │ └── app3 │ └── docker-compose.yml ├── docker_app_host │ ├── app1 │ │ └── docker-compose.yml │ ├── app2 │ │ └── docker-compose.yml │ └── app3 │ └── docker-compose.yml ├── .drone.yml └── renovate.json Just need to change a few settings:\nAdd renovate collaborator to repository\nIn the target repository, go to Settings--\u003eCollaborators and add the renovate user (this will allow renovate to open pull requests) Add renovate.json\nUpon first run, Renovate will open a pull request with a basic renovate.json file, but I’ve provided an example below of mine (notice how I’m ignoring the path apps_old, you can leave that off if you don’t need it) { \"$schema\": \"https://docs.renovatebot.com/renovate-schema.json\", \"extends\": [ \"config:base\" ], \"dependencyDashboard\": true, \"dependencyDashboardTitle\": \"Renovate Dashboard\", \"labels\": [\"renovatebot\"], \"docker-compose\": { \"ignorePaths\": [\"apps_old\"] }, \"hostRules\": [ { \"matchHost\": \"docker.io\", \"concurrentRequestLimit\": 2 } ] } First run Up until now, Renovate has probably been running as you’ve been making changes, but it has probably failed a few times due to missing keys or permissions.\nLogin to Drone as the renovate user and click on New Build in the top-right, and you should see Renovate run and (hopefully) succeed.\nIf not, the .drone.yml file I’ve provided above has LOG_LEVEL: debug set, which means you should be able to search in Drone’s run logs to find errors.\nWith the cronjob setup, Renovate will run on your schedule and open pull requests as it finds outdated dependencies.\nCaveats of self-hosting Continuous runs As I mentioned at the beginning, when running Renovate as a GitHub app, it runs continuously in the background. Any time you make a change, Renovate sees it and runs automatically. However, when you self-host Renovate, you need to run Renovate on a schedule (which is why we setup a Drone cronjob).\nSome features of Renovate, like the check boxes on the Dependency Dashboard, only apply when Renovate runs. For example, if you’re using the hosted Renovate GitHub app and click a checkbox on the Dependency Dashboard, Renovate will pickup that change almost immediately. However, if you’re self-hosting Renovate, the checkbox won’t do anything until Renovate runs (whether you run it manually in Drone or it runs via cron).\nRate-limiting When self-hosting, you don’t want to run Renovate too often, as you’ll probably hit a rate limit from some service (GitHub, Docker Hub, etc…). In my case, I hit the Docker Hub rate limit pretty quickly by running builds every hour.\nIn November 2020, Docker introduced rate limiting to Docker Hub. It limits (by IP address) anonymous pulls to 100 per six hours, and authenticated pulls to 200 per six hours. I had 20+ docker-compose.yml files (each with multiple container images) in my initial Renovate pull request, and I kept hitting the error below.\n\"response\": { \"statusCode\": 429, \"statusMessage\": \"Too Many Requests\", \"body\": \"{\\n \\\"errors\\\": [\\n {\\n \\\"code\\\": \\\"TOOMANYREQUESTS\\\",\\n \\\"message\\\": \\\"You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit\\\"\\n }\\n ]\\n}\\n\", \"headers\": { \"cache-control\": \"no-cache\", \"content-type\": \"application/json\", \"connection\": \"close\" }, \"httpVersion\": \"1.1\", \"retryCount\": 2 } If you hit the Docker Hub rate limit, these are your options:\nTry to use some images from an alternative container registry (e.g., GHCR or Quay.io) Create a Docker account and login (example config.js below) A free Docker account will get you 200 pulls per six hours A paid Docker account at $5/month will get you 5000 pulls per day module.exports = { hostRules: [ { hostType: 'docker', username: '', password: process.env.DOCKER_HUB_PASSWORD, }, ], }; Run your Drone cronjob less-often or create a custom cronjob Setup a proxy registry and pull your images from there Add a concurrent request limit to docker.io (example renovate.json snippet below) \"hostRules\": [ { \"matchHost\": \"docker.io\", \"concurrentRequestLimit\": 2 } ] Docker image size The renovate/renovate Docker image is about 1.5GB in size (compressed). If you don’t pin to a specific tag (like 33.2.0), you’ll waste a lot of space downloading the latest tag over and over again.\nThere is a slim tag, but it only contains Node.js, so if you need anything else (Docker, Python, Java, etc…), it won’t work.\nUse Renovate to update Renovate Obviously, since we pinned the Renovate image to 33.2.0, we’ll need to also put a renovate.json file in our renovate/renovate-config Gitea repository to use Renovate to keep Renovate updated.\nConclusion I’ve been using Renovate for about a week now and really like it. It’s obviously a much smoother experience running on GitHub than self-hosted, but it’s enough to really make a difference in my workflow already.\nAlso, I highly recommend checking out these article for more tips on getting Renovate setup:\nJerry Ng: 12 Tips to Self-host Renovate Bot Marius Shekow: Renovate bot cheat sheet – the 11 most useful customizations -Logan\n",
  "wordCount" : "1508",
  "inLanguage": "en",
  "image":"https://loganmarchione.github.io/assets/featured/featured_renovate.svg","datePublished": "2022-10-24T00:00:00Z",
  "dateModified": "2022-10-24T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Logan Marchione"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://loganmarchione.github.io/2022/10/how-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Logan Marchione",
    "logo": {
      "@type": "ImageObject",
      "url": "https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://loganmarchione.github.io" accesskey="h" title="Logan Marchione (Alt + H)">
                <img src="https://loganmarchione.github.io/assets/favicon/favicon_loganmarchione_logo.svg" alt="" aria-label="logo"
                    height="35">Logan Marchione</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://loganmarchione.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://loganmarchione.github.io/privacy" title="Privacy">
                    <span>Privacy</span>
                </a>
            </li>
            <li>
                <a href="https://loganmarchione.github.io/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://loganmarchione.github.io/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      How to run Renovate on a self-hosted Gitea and Drone instance
    </h1>
    <div class="post-meta"><span title='2022-10-24 00:00:00 +0000 UTC'>2022-10-24</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1508 words&nbsp;·&nbsp;Logan Marchione

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://loganmarchione.github.io/assets/featured/featured_renovate.svg" alt="featured image">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#self-hosting-renovate" aria-label="Self-hosting Renovate">Self-hosting Renovate</a></li>
                <li>
                    <a href="#setup" aria-label="Setup">Setup</a><ul>
                        
                <li>
                    <a href="#github-steps" aria-label="GitHub steps">GitHub steps</a></li>
                <li>
                    <a href="#gitea-steps" aria-label="Gitea steps">Gitea steps</a><ul>
                        
                <li>
                    <a href="#renovate-user" aria-label="Renovate user">Renovate user</a></li></ul>
                </li>
                <li>
                    <a href="#drone-steps" aria-label="Drone steps">Drone steps</a></li>
                <li>
                    <a href="#more-gitea-steps" aria-label="More Gitea steps">More Gitea steps</a></li>
                <li>
                    <a href="#first-run" aria-label="First run">First run</a></li></ul>
                </li>
                <li>
                    <a href="#caveats-of-self-hosting" aria-label="Caveats of self-hosting">Caveats of self-hosting</a><ul>
                        
                <li>
                    <a href="#continuous-runs" aria-label="Continuous runs">Continuous runs</a></li>
                <li>
                    <a href="#rate-limiting" aria-label="Rate-limiting">Rate-limiting</a></li>
                <li>
                    <a href="#docker-image-size" aria-label="Docker image size">Docker image size</a></li>
                <li>
                    <a href="#use-renovate-to-update-renovate" aria-label="Use Renovate to update Renovate">Use Renovate to update Renovate</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>I recently started using Mend&rsquo;s <a href="https://github.com/renovatebot/renovate">Renovate</a> bot to keep my dependencies up-to-date on my GitHub projects. GitHub already has tool for this called <a href="https://github.com/dependabot">Dependabot</a>, but it only works with GitHub. Renovate is much more flexible, and it&rsquo;s also open-source, so it can run on other Git platforms, like my self-hosted Gitea and Drone instance at home.</p>
<p>However, self-hosting Renovate is more difficult because the hosted version takes care of a lot of the &ldquo;magic&rdquo; for you, so it &ldquo;just works&rdquo;. These are my notes on getting Renovate working with a self-hosted instance of Gitea and Drone.</p>
<h1 id="self-hosting-renovate">Self-hosting Renovate<a hidden class="anchor" aria-hidden="true" href="#self-hosting-renovate">#</a></h1>
<p>As a user, there are <a href="https://docs.renovatebot.com/getting-started/running/">two ways of running Renovate</a>:</p>
<ol>
<li>someone else hosts Renovate and you install it for the repositories you choose (e.g., as a <a href="https://github.com/apps/renovate">GitHub app</a>)
<ul>
<li>you extend off the global configuration provided my Renovate by adding a per-repository configuration file (called <code>renovate.json</code>)</li>
<li>Renovate runs continuously in the background</li>
</ul>
</li>
<li>you host Renovate
<ul>
<li>you provide some infrastructure for Renovate to run on (e.g., by running a Docker image, using a GitHub Action, running a npm package, etc&hellip;)</li>
<li>you need to provide a global configuration file (called <code>config.js</code>)</li>
<li>you add a per-repository configuration file (called <code>renovate.json</code>)</li>
<li>Renovate needs to run on a schedule (e.g., on a cronjob)</li>
</ul>
</li>
</ol>
<p>In my case, I&rsquo;m running Gitea and Drone at home, so I&rsquo;m going to self-host Renovate and run the Renovate Docker image as a Drone step.</p>
<p>It&rsquo;s important to note that there are two configuration files, but it&rsquo;s recommended to keep as much configuration as possible in the per-repository files so that end users have the most flexibility and transparency.</p>
<ul>
<li><a href="https://docs.renovatebot.com/self-hosted-configuration/">global configuration</a> (called <code>config.js</code>)</li>
<li><a href="https://docs.renovatebot.com/configuration-options/">per-repository configuration</a> (called <code>renovate.json</code>)</li>
</ul>
<h1 id="setup">Setup<a hidden class="anchor" aria-hidden="true" href="#setup">#</a></h1>
<h2 id="github-steps">GitHub steps<a hidden class="anchor" aria-hidden="true" href="#github-steps">#</a></h2>
<ol>
<li>Create a GitHub <a href="https://github.com/settings/tokens/new">personal access token</a> (PAT)
<ul>
<li>You need a GitHub PAT for <a href="https://docs.renovatebot.com/getting-started/running/#githubcom-token-for-release-notes">getting release notes</a> from GitHub.com to increase the hourly API limit</li>
<li>It can be for any account (e.g., your personal account)</li>
<li>It needs the <code>public_repo</code> permission, nothing else</li>
<li>Save this token somewhere</li>
</ul>
</li>
</ol>
<h2 id="gitea-steps">Gitea steps<a hidden class="anchor" aria-hidden="true" href="#gitea-steps">#</a></h2>
<h3 id="renovate-user">Renovate user<a hidden class="anchor" aria-hidden="true" href="#renovate-user">#</a></h3>
<ol>
<li>
<p>Create <code>renovate</code> user</p>
<ul>
<li>Login as the Gitea admin user and create a user for Renovate, called <code>renovate</code></li>
</ul>
</li>
<li>
<p>Create a personal access token (PAT) for the <code>renovate</code> user</p>
<ul>
<li>Logout of the admin user</li>
<li>Login as the <code>renovate</code> user, go to <code>Settings--&gt;Applications--&gt;Manage Access Tokens</code> and click on <code>Generate Token</code></li>
<li>Save this token somewhere</li>
</ul>
</li>
<li>
<p>Create repository for <code>renovate</code></p>
<ul>
<li>Create a new repository under the <code>renovate</code> user called <code>renovate-config</code></li>
<li>Create a file called <code>config.js</code> (this contains <a href="https://docs.renovatebot.com/self-hosted-configuration/">global settings</a> for your instance of Renovate)</li>
<li>Below is my <code>config.js</code> file (you&rsquo;ll have to update the <code>endpoint</code>, <code>gitAuthor</code>, and the <code>repositories</code> section with the list of all Gitea repositories you want Renovate to run against)</li>
</ul>
<pre tabindex="0"><code>module.exports = {
  platform: &#39;gitea&#39;,
  endpoint: &#39;https://git.internal.yourdomain.com/api/v1/&#39;,
  gitAuthor: &#39;Renovate Bot &lt;renovate@yourdomain.com&gt;&#39;,
  username: &#39;renovate&#39;,
  autodiscover: true,
  onboardingConfig: {
    $schema: &#39;https://docs.renovatebot.com/renovate-schema.json&#39;,
    extends: [&#39;config:base&#39;]
  },
  optimizeForDisabled: true,
  persistRepoData: true,
  repositories: [
    &#34;logan/docker&#34;
  ]
}
</code></pre><ul>
<li>Create a file called <code>.drone.yml</code> (this is the file that will run on a schedule to actually run Renovate)</li>
<li>Below is my <code>.drone.yml</code> file</li>
</ul>
<pre tabindex="0"><code>---
kind: pipeline
type: docker
name: renovate

trigger:
  event:
    - cron
    - push
    - custom

environment:
  LOG_LEVEL: debug

steps:
  - name: renovate - validate config
    image: renovate/renovate:33.2.0
    # https://github.com/renovatebot/renovate/discussions/15049
    commands:
      - unset GIT_COMMITTER_NAME GIT_COMMITTER_EMAIL GIT_AUTHOR_NAME GIT_AUTHOR_EMAIL
      - renovate-config-validator

  - name: renovate
    image: renovate/renovate:33.2.0
    # https://github.com/renovatebot/renovate/discussions/15049
    commands:
      - unset GIT_COMMITTER_NAME GIT_COMMITTER_EMAIL GIT_AUTHOR_NAME GIT_AUTHOR_EMAIL
      - renovate

    environment:
      RENOVATE_TOKEN:
        from_secret: RENOVATE_TOKEN
      GITHUB_COM_TOKEN:
        from_secret: GITHUB_COM_TOKEN
</code></pre></li>
</ol>
<h2 id="drone-steps">Drone steps<a hidden class="anchor" aria-hidden="true" href="#drone-steps">#</a></h2>
<ol>
<li>
<p>Login to Drone as the <code>renovate</code> user (you&rsquo;ll have to authorize the application)</p>
</li>
<li>
<p>Go to <code>renovate-config--&gt;Settings--&gt;Secrets</code> and click on <code>New Secret</code></p>
<ul>
<li>Add a secret called <code>GITHUB_COM_TOKEN</code> with the value of the GitHub PAT</li>
<li>Add a secret called <code>RENOVATE_TOKEN</code> with the value of the <code>renovate</code> user&rsquo;s Gitea PAT</li>
</ul>
</li>
<li>
<p>Go to <code>renovate-config--&gt;Settings--&gt;Cron Jobs</code> and click on <code>New Cron Job</code></p>
<ul>
<li>Add an <code>hourly</code> cron job using <code>@hourly</code></li>
<li>This is how to specify how often to run Renovate</li>
</ul>
</li>
</ol>
<h2 id="more-gitea-steps">More Gitea steps<a hidden class="anchor" aria-hidden="true" href="#more-gitea-steps">#</a></h2>
<p>Renovate comes with a built-in <a href="https://docs.renovatebot.com/modules/manager/docker-compose/">Docker Compose manager</a>, so it can automatically find any compose files using the regex below.</p>
<pre tabindex="0"><code>(^|/)(?:docker-)?compose[^/]*\.ya?ml$
</code></pre><p>Now we need a target repository we want to run Renovate against. This is the example repository I&rsquo;m using, called <code>logan/docker</code>. It contains the following:</p>
<ul>
<li>a directory for docker apps that I don&rsquo;t use anymore (<code>apps_old</code>)</li>
<li>a directory for docker apps that I currently use (<code>docker_app_host</code>)</li>
<li>a <code>.drone.yml</code> file (used for linting my <code>docker-compose.yml</code> files)</li>
<li>a <code>renovate.json</code> file</li>
</ul>
<pre tabindex="0"><code>.
├── apps_old
│   ├── app1
│   │   └── docker-compose.yml
│   ├── app2
│   │   └── docker-compose.yml
│   └── app3
│       └── docker-compose.yml
├── docker_app_host
│   ├── app1
│   │   └── docker-compose.yml
│   ├── app2
│   │   └── docker-compose.yml
│   └── app3
│       └── docker-compose.yml
├── .drone.yml
└── renovate.json
</code></pre><p>Just need to change a few settings:</p>
<ol>
<li>
<p>Add <code>renovate</code> collaborator to repository</p>
<ul>
<li>In the target repository, go to <code>Settings--&gt;Collaborators</code> and add the <code>renovate</code> user (this will allow <code>renovate</code> to open pull requests)</li>
</ul>
</li>
<li>
<p>Add <code>renovate.json</code></p>
<ul>
<li>Upon first run, Renovate will open a pull request with a basic <code>renovate.json</code> file, but I&rsquo;ve provided an example below of mine (notice how I&rsquo;m ignoring the path <code>apps_old</code>, you can leave that off if you don&rsquo;t need it)</li>
</ul>
<pre tabindex="0"><code>{
  &#34;$schema&#34;: &#34;https://docs.renovatebot.com/renovate-schema.json&#34;,
  &#34;extends&#34;: [
    &#34;config:base&#34;
  ],
  &#34;dependencyDashboard&#34;: true,
  &#34;dependencyDashboardTitle&#34;: &#34;Renovate Dashboard&#34;,
  &#34;labels&#34;: [&#34;renovatebot&#34;],
  &#34;docker-compose&#34;: {
    &#34;ignorePaths&#34;: [&#34;apps_old&#34;]
  },
  &#34;hostRules&#34;: [
    {
      &#34;matchHost&#34;: &#34;docker.io&#34;,
      &#34;concurrentRequestLimit&#34;: 2
    }
  ]
}
</code></pre></li>
</ol>
<h2 id="first-run">First run<a hidden class="anchor" aria-hidden="true" href="#first-run">#</a></h2>
<p>Up until now, Renovate has probably been running as you&rsquo;ve been making changes, but it has probably failed a few times due to missing keys or permissions.</p>
<p>Login to Drone as the <code>renovate</code> user and click on <code>New Build</code> in the top-right, and you should see Renovate run and (hopefully) succeed.</p>
<p>If not, the <code>.drone.yml</code> file I&rsquo;ve provided above has <code>LOG_LEVEL: debug</code> set, which means you should be able to search in Drone&rsquo;s run logs to find errors.</p>
<p>With the cronjob setup, Renovate will run on your schedule and open pull requests as it finds outdated dependencies.</p>
<h1 id="caveats-of-self-hosting">Caveats of self-hosting<a hidden class="anchor" aria-hidden="true" href="#caveats-of-self-hosting">#</a></h1>
<h2 id="continuous-runs">Continuous runs<a hidden class="anchor" aria-hidden="true" href="#continuous-runs">#</a></h2>
<p>As I mentioned at the beginning, when running Renovate as a GitHub app, it runs continuously in the background. Any time you make a change, Renovate sees it and runs automatically. However, when you self-host Renovate, you need to run Renovate on a schedule (which is why we setup a Drone cronjob).</p>
<p>Some features of Renovate, like the <a href="https://docs.renovatebot.com/getting-started/use-cases/#on-demand-updates-via-dependency-dashboard">check boxes on the Dependency Dashboard</a>, only apply when Renovate runs. For example, if you&rsquo;re using the hosted Renovate GitHub app and click a checkbox on the Dependency Dashboard, Renovate will pickup that change almost immediately. However, if you&rsquo;re self-hosting Renovate, the checkbox won&rsquo;t do anything until Renovate runs (whether you run it manually in Drone or it runs via cron).</p>
<h2 id="rate-limiting">Rate-limiting<a hidden class="anchor" aria-hidden="true" href="#rate-limiting">#</a></h2>
<p>When self-hosting, you don&rsquo;t want to run Renovate too often, as you&rsquo;ll probably hit a rate limit from some service (GitHub, Docker Hub, etc&hellip;). In my case, I hit the Docker Hub rate limit pretty quickly by running builds every hour.</p>
<p>In November 2020, Docker introduced <a href="https://www.docker.com/increase-rate-limits/">rate limiting</a> to Docker Hub. It limits (by IP address) anonymous pulls to 100 per six hours, and authenticated pulls to 200 per six hours. I had 20+ <code>docker-compose.yml</code> files (each with multiple container images) in my initial Renovate pull request, and I kept hitting the error below.</p>
<pre tabindex="0"><code>&#34;response&#34;: {
  &#34;statusCode&#34;: 429,
  &#34;statusMessage&#34;: &#34;Too Many Requests&#34;,
  &#34;body&#34;: &#34;{\n  \&#34;errors\&#34;: [\n    {\n      \&#34;code\&#34;: \&#34;TOOMANYREQUESTS\&#34;,\n      \&#34;message\&#34;: \&#34;You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit\&#34;\n    }\n  ]\n}\n&#34;,
  &#34;headers&#34;: {
    &#34;cache-control&#34;: &#34;no-cache&#34;,
    &#34;content-type&#34;: &#34;application/json&#34;,
    &#34;connection&#34;: &#34;close&#34;
  },
  &#34;httpVersion&#34;: &#34;1.1&#34;,
  &#34;retryCount&#34;: 2
}
</code></pre><p>If you hit the Docker Hub rate limit, these are your options:</p>
<ul>
<li>Try to use some images from an alternative container registry (e.g., GHCR or Quay.io)</li>
<li>Create a Docker account and <a href="https://docs.renovatebot.com/docker/#dockerhub">login</a> (example <code>config.js</code> below)
<ul>
<li>A free Docker account will get you 200 pulls per six hours</li>
<li>A paid Docker account at $5/month will get you 5000 pulls per day</li>
</ul>
</li>
</ul>
<pre tabindex="0"><code>module.exports = {
  hostRules: [
    {
      hostType: &#39;docker&#39;,
      username: &#39;&lt;your-username&gt;&#39;,
      password: process.env.DOCKER_HUB_PASSWORD,
    },
  ],
};
</code></pre><ul>
<li>Run your Drone cronjob less-often or create a <a href="https://docs.drone.io/cron/">custom cronjob</a></li>
<li>Setup a <a href="https://container-registry.com/posts/overcome-docker-hub-rate-limit/#3-proxy-to-docker-hub">proxy registry</a> and pull your images from there</li>
<li>Add a <a href="https://docs.renovatebot.com/configuration-options/#concurrentrequestlimit">concurrent request limit</a> to <code>docker.io</code> (example <code>renovate.json</code> snippet below)</li>
</ul>
<pre tabindex="0"><code>  &#34;hostRules&#34;: [
    {
      &#34;matchHost&#34;: &#34;docker.io&#34;,
      &#34;concurrentRequestLimit&#34;: 2
    }
  ]
</code></pre><h2 id="docker-image-size">Docker image size<a hidden class="anchor" aria-hidden="true" href="#docker-image-size">#</a></h2>
<p>The <code>renovate/renovate</code> <a href="https://docs.renovatebot.com/getting-started/running/#docker-image">Docker image</a> is about 1.5GB in size (compressed). If you don&rsquo;t pin to a specific tag (like <code>33.2.0</code>), you&rsquo;ll waste a lot of space downloading the <code>latest</code> tag over and over again.</p>
<p>There is a <code>slim</code> tag, but it only contains Node.js, so if you need anything else (Docker, Python, Java, etc&hellip;), it won&rsquo;t work.</p>
<h2 id="use-renovate-to-update-renovate">Use Renovate to update Renovate<a hidden class="anchor" aria-hidden="true" href="#use-renovate-to-update-renovate">#</a></h2>
<p>Obviously, since we pinned the Renovate image to <code>33.2.0</code>, we&rsquo;ll need to also put a <code>renovate.json</code> file in our <code>renovate/renovate-config</code> Gitea repository to use Renovate to keep Renovate updated.</p>
<p><img loading="lazy" src="/assets/memes/inception_we_need_to_go_deeper.jpg" alt="meme"  />
</p>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>I&rsquo;ve been using Renovate for about a week now and really like it. It&rsquo;s obviously a much smoother experience running on GitHub than self-hosted, but it&rsquo;s enough to really make a difference in my workflow already.</p>
<p>Also, I highly recommend checking out these article for more tips on getting Renovate setup:</p>
<ul>
<li>Jerry Ng: <a href="https://jerrynsh.com/12-tips-to-self-host-renovate-bot/">12 Tips to Self-host Renovate Bot</a></li>
<li>Marius Shekow: <a href="https://www.augmentedmind.de/2021/07/25/renovate-bot-cheat-sheet/">Renovate bot cheat sheet – the 11 most useful customizations</a></li>
</ul>
<p>-Logan</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on twitter"
        href="https://twitter.com/intent/tweet/?text=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance&amp;url=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f&amp;title=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance&amp;summary=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance&amp;source=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f&title=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on whatsapp"
        href="https://api.whatsapp.com/send?text=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance%20-%20https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share How to run Renovate on a self-hosted Gitea and Drone instance on telegram"
        href="https://telegram.me/share/url?text=How%20to%20run%20Renovate%20on%20a%20self-hosted%20Gitea%20and%20Drone%20instance&amp;url=https%3a%2f%2floganmarchione.github.io%2f2022%2f10%2fhow-to-run-renovate-on-a-self-hosted-gitea-and-drone-instance%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://loganmarchione.github.io">Logan Marchione</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div class="kb-club">
  <a target="_blank" href="https://512kb.club"><img src="/assets/assets/512kb-club-green-team.svg" alt="512kb club badge"></a>
</div>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
